package br.com.javaoito.list;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.stream.Collectors;
import java.util.stream.Stream;

import br.com.javaoito.list.vo.Person;

public class WorkingWithList {
	
	private final static String PATH_FILE = "/home/adriano.silva/√Årea de Trabalho/input.csv";
	
	public List<Person> readFile() throws IOException {
		
		Path path = Path.of(PATH_FILE);
		
		Stream<String> linhas = Files.lines(path, StandardCharsets.ISO_8859_1);
		
		List<String> peopleList = linhas.collect(Collectors.toList());
		
		return populatePerson(peopleList);
	}
	
	private List<Person> populatePerson(List<String> peopleList) {
		
		Iterator it = peopleList.listIterator();
		Person person = new Person();
		
        String str = null;
        
        List<Person> people = new ArrayList<Person>();
        
        while (it.hasNext()) {
            str = (String) it.next();

            String info[]  = str.split(",");
            
            System.out.println(info);
            
            person.setNome(info[0]);
            person.setIdade(Integer.valueOf(info[1]));
            person.setEmail(info[2]);
			
            people.add(person);
		}
		
		return people;
	}

}
